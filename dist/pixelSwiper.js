!function(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.pixelSwiper=factory():root.pixelSwiper=factory()}("undefined"!=typeof self?self:this,function(){return function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=41)}([function(module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},function(module,exports,__webpack_require__){var store=__webpack_require__(29)("wks"),uid=__webpack_require__(30),Symbol=__webpack_require__(0).Symbol,USE_SYMBOL="function"==typeof Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))}).store=store},function(module,exports){var core=module.exports={version:"2.5.3"};"number"==typeof __e&&(__e=core)},function(module,exports,__webpack_require__){var isObject=__webpack_require__(8);module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},function(module,exports,__webpack_require__){var global=__webpack_require__(0),core=__webpack_require__(2),ctx=__webpack_require__(10),hide=__webpack_require__(5),$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype,target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype;IS_GLOBAL&&(source=name);for(key in source)(own=!IS_FORCED&&target&&void 0!==target[key])&&key in exports||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},function(module,exports,__webpack_require__){var dP=__webpack_require__(7),createDesc=__webpack_require__(25);module.exports=__webpack_require__(6)?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(16)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){var anObject=__webpack_require__(3),IE8_DOM_DEFINE=__webpack_require__(52),toPrimitive=__webpack_require__(53),dP=Object.defineProperty;exports.f=__webpack_require__(6)?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},function(module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},function(module,exports){module.exports={}},function(module,exports,__webpack_require__){var aFunction=__webpack_require__(11);module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},function(module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},function(module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},function(module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},function(module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},function(module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},function(module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},function(module,exports,__webpack_require__){var isObject=__webpack_require__(8),document=__webpack_require__(0).document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},function(module,exports,__webpack_require__){var IObject=__webpack_require__(27),defined=__webpack_require__(15);module.exports=function(it){return IObject(defined(it))}},function(module,exports,__webpack_require__){var shared=__webpack_require__(29)("keys"),uid=__webpack_require__(30);module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},function(module,exports,__webpack_require__){var def=__webpack_require__(7).f,has=__webpack_require__(12),TAG=__webpack_require__(1)("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},function(module,exports,__webpack_require__){"use strict";function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}var aFunction=__webpack_require__(11);module.exports.f=function(C){return new PromiseCapability(C)}},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(48),__esModule:!0}},function(module,exports,__webpack_require__){"use strict";var LIBRARY=__webpack_require__(24),$export=__webpack_require__(4),redefine=__webpack_require__(54),hide=__webpack_require__(5),has=__webpack_require__(12),Iterators=__webpack_require__(9),$iterCreate=__webpack_require__(55),setToStringTag=__webpack_require__(20),getPrototypeOf=__webpack_require__(61),ITERATOR=__webpack_require__(1)("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":case"values":return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=!BUGGY&&$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||has(IteratorPrototype,ITERATOR)||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},function(module,exports){module.exports=!0},function(module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},function(module,exports,__webpack_require__){var $keys=__webpack_require__(58),enumBugKeys=__webpack_require__(31);module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},function(module,exports,__webpack_require__){var cof=__webpack_require__(13);module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(14),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},function(module,exports,__webpack_require__){var global=__webpack_require__(0),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});module.exports=function(key){return store[key]||(store[key]={})}},function(module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},function(module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(module,exports,__webpack_require__){var document=__webpack_require__(0).document;module.exports=document&&document.documentElement},function(module,exports,__webpack_require__){var defined=__webpack_require__(15);module.exports=function(it){return Object(defined(it))}},function(module,exports,__webpack_require__){var cof=__webpack_require__(13),TAG=__webpack_require__(1)("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(3),aFunction=__webpack_require__(11),SPECIES=__webpack_require__(1)("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},function(module,exports,__webpack_require__){var defer,channel,port,ctx=__webpack_require__(10),invoke=__webpack_require__(72),html=__webpack_require__(32),cel=__webpack_require__(17),global=__webpack_require__(0),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==__webpack_require__(13)(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},function(module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(3),isObject=__webpack_require__(8),newPromiseCapability=__webpack_require__(21);module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(79),__esModule:!0}},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0,exports.default=function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function loadImage(src){return new _promise2.default(function(resolve,reject){var image=new Image;image.onload=resolve.bind(null,image),image.onerror=reject,image.src=src})}function randomInt(min,max){return~~(Math.random()*(max-min)+min)}function getRandomColor(){return"#"+Array.apply(null,new Array(3)).map(function(){return randomInt(0,255).toString(16).replace(/^(\w{1})$/,"0$1")}).join("")}var _stringify=__webpack_require__(42),_stringify2=_interopRequireDefault(_stringify),_regenerator=__webpack_require__(44),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=__webpack_require__(47),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_assign=__webpack_require__(39),_assign2=_interopRequireDefault(_assign),_classCallCheck2=__webpack_require__(40),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_promise=__webpack_require__(22),_promise2=_interopRequireDefault(_promise),_particle=__webpack_require__(84),_particle2=_interopRequireDefault(_particle),_calc=__webpack_require__(89),_calc2=_interopRequireDefault(_calc);window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;var PixelSwiper=function PixelSwiper(selector,options){(0,_classCallCheck3.default)(this,PixelSwiper),this.set(options),this.initialize(selector)};(0,_assign2.default)(PixelSwiper.prototype,{paused:!1,loop:!0,swipeCount:0,loopCount:0,width:0,height:0,paddingLeft:0,paddingTop:0,rowNum:0,colNum:0,swipeList:[],collections:[],lastIndex:-1,index:0,animation:!0,randomPosition:!1,shape:"square",velocity:1,particleSize:20,onIndexChange:null,workerPath:"",useWebWorker:!1,set:function(options){for(var key in options)options.hasOwnProperty(key)&&(this[key]=options[key])},initialize:function(selector){var canvas=document.querySelector(selector),cacheCanvas=document.createElement("canvas");this.canvas=canvas,this.cacheCanvas=cacheCanvas,this.ctx=canvas.getContext("2d"),this.cacheCtx=cacheCanvas.getContext("2d"),this.canvas.width=this.width,this.canvas.height=this.height,this.cacheCanvas.width=this.width,this.cacheCanvas.height=this.height,this.rowNum=Math.ceil(this.height/this.particleSize),this.colNum=Math.ceil(this.width/this.particleSize),this.run()},renderTextToCacheCanvas:function(_ref){var text=_ref.text,color=_ref.color,fontSize=_ref.fontSize,randomColor=_ref.randomColor,_ref$paddingTop=_ref.paddingTop,paddingTop=void 0===_ref$paddingTop?0:_ref$paddingTop,_ref$paddingLeft=_ref.paddingLeft,paddingLeft=void 0===_ref$paddingLeft?0:_ref$paddingLeft,ctx=this.cacheCtx;ctx.clearRect(0,0,this.width,this.height),ctx.save(),ctx.textBaseline="top",ctx.font=(fontSize||12)+"px 'microsoft yahei light'",ctx.fillStyle=randomColor?getRandomColor():color||"#000000",ctx.fillText(text,paddingLeft,paddingTop),ctx.restore()},renderImageToCacheCanvas:function(_ref2){var _this=this,url=_ref2.url,_ref2$paddingTop=_ref2.paddingTop,paddingTop=void 0===_ref2$paddingTop?0:_ref2$paddingTop,_ref2$paddingLeft=_ref2.paddingLeft,paddingLeft=void 0===_ref2$paddingLeft?0:_ref2$paddingLeft;return new _promise2.default(function(){var _ref3=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee(resolve,reject){var image,w,h,scale,imgW,imgH,left,top,dstX,dstY,ctx;return _regenerator2.default.wrap(function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,loadImage(url);case 3:image=_context.sent,w=_this.width-(paddingLeft<<1),h=_this.height-(paddingTop<<1),scale=1,(image.width>w||image.height>h)&&(scale=image.width/image.height>w/h?w/image.width:h/image.height),image.width<w&&image.height<h&&(scale=image.width/image.height>w/h?w/image.width:h/image.height),imgW=image.width*scale,imgH=image.height*scale,left=_this.width-imgW>>1,top=_this.height-imgH>>1,dstX=left>paddingLeft?left/scale:paddingLeft/scale,dstY=top>paddingTop?top/scale:paddingTop/scale,ctx=_this.cacheCtx,ctx.clearRect(0,0,_this.width,_this.height),ctx.save(),ctx.scale(scale,scale),ctx.drawImage(image,dstX,dstY),ctx.restore(),resolve(),_context.next=28;break;case 24:_context.prev=24,_context.t0=_context.catch(0),console.error(_context.t0),reject(_context.t0);case 28:case"end":return _context.stop()}},_callee,_this,[[0,24]])}));return function(_x,_x2){return _ref3.apply(this,arguments)}}())},getPixelData:function(){var _this2=this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _promise2.default(function(){var _ref4=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee2(resolve,reject){var imgData,postData,worker;return _regenerator2.default.wrap(function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_context2.prev=0,!options.text){_context2.next=5;break}_this2.renderTextToCacheCanvas(options),_context2.next=7;break;case 5:return _context2.next=7,_this2.renderImageToCacheCanvas(options);case 7:imgData=_this2.cacheCtx.getImageData(0,0,_this2.width,_this2.height).data,postData={imageData:imgData,width:_this2.width,height:_this2.height,size:_this2.particleSize},_this2.useWebWorker?(worker=new Worker(_this2.workerPath),worker.onmessage=function(e){return resolve(e.data)},worker.postMessage(postData)):resolve((0,_calc2.default)(postData)),_context2.next=16;break;case 12:_context2.prev=12,_context2.t0=_context2.catch(0),console.error(_context2.t0),reject(_context2.t0);case 16:case"end":return _context2.stop()}},_callee2,_this2,[[0,12]])}));return function(_x4,_x5){return _ref4.apply(this,arguments)}}())},getCollectionData:function(){var _this3=this;return new _promise2.default(function(){var _ref5=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee3(resolve,reject){var size,i,swipe,pixelData,res,m,n,data;return _regenerator2.default.wrap(function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:_context3.prev=0,size=_this3.particleSize,i=0;case 3:if(!(i<_this3.swipeList.length)){_context3.next=14;break}return swipe=_this3.swipeList[i],_context3.next=7,_this3.getPixelData(swipe);case 7:for(pixelData=_context3.sent,res=[],m=0;m<_this3.rowNum;m++)for(n=0;n<_this3.colNum;n++)data=pixelData[m]&&pixelData[m][n],swipe.randomParticleColor&&data.a&&(data={r:randomInt(0,255),g:randomInt(0,255),b:randomInt(0,255),a:255}),data&&res.push({ox:size*n+(size>>1),oy:size*m+(size>>1),size:size,bg:{r:data.r,g:data.g,b:data.b,a:data.a},row:m,col:n});_this3.swipeList[i].pixelData=res;case 11:i++,_context3.next=3;break;case 14:resolve(),_context3.next=21;break;case 17:_context3.prev=17,_context3.t0=_context3.catch(0),console.error(_context3.t0),reject(_context3.t0);case 21:case"end":return _context3.stop()}},_callee3,_this3,[[0,17]])}));return function(_x6,_x7){return _ref5.apply(this,arguments)}}())},nextIndex:function(){if(this.lastIndex=this.index,++this.index>=this.swipeList.length){if(!this.loop)return void(this.paused=!0);this.index=0,this.loopCount++}this.swipeCount++,this.onIndexChange&&this.onIndexChange({index:this.index})},next:function(){this.paused||(this.nextIndex(),this.updateCollections())},loopSwiper:function(){var _this4=this;if(!this.paused){var duration=this.swipeList[this.index].duration;duration&&setTimeout(function(){_this4.next(),_this4.loopSwiper()},duration)}},getSwipeConfig:function(){var animation=this.animation,randomPosition=this.randomPosition,subConfig=this.swipeList[this.index];return 0===this.swipeCount&&("boolean"==typeof subConfig.initialAnimation&&(animation=subConfig.initialAnimation),"boolean"==typeof subConfig.initialRandomPosition&&(randomPosition=subConfig.initialRandomPosition)),(0,_assign2.default)({},{width:this.width,height:this.height,particleSize:this.particleSize,velocity:this.velocity,shape:this.shape,animation:animation,randomPosition:randomPosition},subConfig)},updateCollections:function(){var _this5=this;if(!this.paused){var pixelData=this.swipeList[this.index].pixelData;if(this.getSwipeConfig().randomPosition){var getDataByPos=function(row,col){for(var res=null,i=0;i<data.length;i++){var d=data[i];if(d.row===row&&d.col===col){res={cell:d,index:i};break}}return res},data=JSON.parse((0,_stringify2.default)(pixelData)),ignoreIndex=[];this.collections.forEach(function(p,i){var cellData=getDataByPos(p.row,p.col);cellData&&cellData.cell&&0===cellData.cell.bg.a&&0===p.tBg.a&&(data.splice(cellData.index,1),ignoreIndex.push(i))}),this.collections.forEach(function(p,i){if(-1===ignoreIndex.indexOf(i)){var randomIndex=randomInt(0,data.length),d=data[randomIndex],bg=d.bg;p.set({row:d.row,col:d.col,tx:d.ox,ty:d.oy,ox:d.ox,oy:d.oy,oBg:{r:bg.r,g:bg.g,b:bg.b,a:bg.a},tBg:{r:bg.r,g:bg.g,b:bg.b,a:bg.a}}),p.reCalc(),data.splice(randomIndex,1)}})}else this.collections.forEach(function(p){var d=pixelData[p.row*_this5.colNum+p.col],bg=d.bg;p.set({oBg:{r:bg.r,g:bg.g,b:bg.b,a:bg.a},tBg:{r:bg.r,g:bg.g,b:bg.b,a:bg.a}}),p.reCalc()})}},run:function(){var _this6=this;return(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function _callee4(){var size,i,j;return _regenerator2.default.wrap(function(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.prev=0,_context4.next=3,_this6.getCollectionData();case 3:for(size=_this6.particleSize,i=0;i<_this6.rowNum;i++)for(j=0;j<_this6.colNum;j++)_this6.collections.push(new _particle2.default({ox:size*j+(size>>1),oy:size*i+(size>>1),size:size,shape:_this6.shape,bg:{r:0,g:0,b:0,a:0},row:i,col:j,velocity:_this6.velocity}));_this6.updateCollections(),_this6.render(),_this6.loopSwiper(),_this6.loopAnim(),_context4.next=14;break;case 11:_context4.prev=11,_context4.t0=_context4.catch(0),console.error(_context4.t0);case 14:case"end":return _context4.stop()}},_callee4,_this6,[[0,11]])}))()},needUpdate:function(){return this.collections.some(function(p){return p.shouldUpdate()})},loopAnim:function(){if(!this.needUpdate())return void requestAnimationFrame(this.loopAnim.bind(this));this.render(),requestAnimationFrame(this.loopAnim.bind(this))},render:function(){var _this7=this,config=this.getSwipeConfig();this.cacheCtx.clearRect(0,0,this.width,this.height),this.collections.forEach(function(p){config.animation||p.set({bg:{r:p.tBg.r,g:p.tBg.g,b:p.tBg.b,a:p.tBg.a}}),_this7.cacheCtx.save(),p.update(),p.render({ctx:_this7.cacheCtx}),_this7.cacheCtx.restore()}),this.ctx.clearRect(0,0,this.width,this.height),this.ctx.drawImage(this.cacheCanvas,0,0)}}),module.exports=PixelSwiper},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(43),__esModule:!0}},function(module,exports,__webpack_require__){var core=__webpack_require__(2),$JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function(it){return $JSON.stringify.apply($JSON,arguments)}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(45)},function(module,exports,__webpack_require__){var g=function(){return this}()||Function("return this")(),hadRuntime=g.regeneratorRuntime&&Object.getOwnPropertyNames(g).indexOf("regeneratorRuntime")>=0,oldRuntime=hadRuntime&&g.regeneratorRuntime;if(g.regeneratorRuntime=void 0,module.exports=__webpack_require__(46),hadRuntime)g.regeneratorRuntime=oldRuntime;else try{delete g.regeneratorRuntime}catch(e){g.regeneratorRuntime=void 0}},function(module,exports){!function(global){"use strict";function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return generator._invoke=makeInvokeMethod(innerFn,self,context),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}function defineIteratorMethods(prototype){["next","throw","return"].forEach(function(method){prototype[method]=function(arg){return this._invoke(method,arg)}})}function AsyncIterator(generator){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==typeof value&&hasOwn.call(value,"__await")?Promise.resolve(value.__await).then(function(value){invoke("next",value,resolve,reject)},function(err){invoke("throw",err,resolve,reject)}):Promise.resolve(value).then(function(unwrapped){result.value=unwrapped,resolve(result)},reject)}reject(record.arg)}function enqueue(method,arg){function callInvokeWithMethodAndArg(){return new Promise(function(resolve,reject){invoke(method,arg,resolve,reject)})}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}var previousPromise;this._invoke=enqueue}function makeInvokeMethod(innerFn,self,context){var state=GenStateSuspendedStart;return function(method,arg){if(state===GenStateExecuting)throw new Error("Generator is already running");if(state===GenStateCompleted){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if(state===GenStateSuspendedStart)throw state=GenStateCompleted,context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state=GenStateExecuting;var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?GenStateCompleted:GenStateSuspendedYield,record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state=GenStateCompleted,context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var method=delegate.iterator[context.method];if(method===undefined){if(context.delegate=null,"throw"===context.method){if(delegate.iterator.return&&(context.method="return",context.arg=undefined,maybeInvokeDelegate(delegate,context),"throw"===context.method))return ContinueSentinel;context.method="throw",context.arg=new TypeError("The iterator does not provide a 'throw' method")}return ContinueSentinel}var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=undefined),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=undefined,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:undefined,done:!0}}var undefined,Op=Object.prototype,hasOwn=Op.hasOwnProperty,$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag",inModule="object"==typeof module,runtime=global.regeneratorRuntime;if(runtime)return void(inModule&&(module.exports=runtime));runtime=global.regeneratorRuntime=inModule?module.exports:{},runtime.wrap=wrap;var GenStateSuspendedStart="suspendedStart",GenStateSuspendedYield="suspendedYield",GenStateExecuting="executing",GenStateCompleted="completed",ContinueSentinel={},IteratorPrototype={};IteratorPrototype[iteratorSymbol]=function(){return this};var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);GeneratorFunction.prototype=Gp.constructor=GeneratorFunctionPrototype,GeneratorFunctionPrototype.constructor=GeneratorFunction,GeneratorFunctionPrototype[toStringTagSymbol]=GeneratorFunction.displayName="GeneratorFunction",runtime.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},runtime.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,toStringTagSymbol in genFun||(genFun[toStringTagSymbol]="GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},runtime.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),AsyncIterator.prototype[asyncIteratorSymbol]=function(){return this},runtime.AsyncIterator=AsyncIterator,runtime.async=function(innerFn,outerFn,self,tryLocsList){var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList));return runtime.isGeneratorFunction(outerFn)?iter:iter.next().then(function(result){return result.done?result.value:iter.next()})},defineIteratorMethods(Gp),Gp[toStringTagSymbol]="Generator",Gp[iteratorSymbol]=function(){return this},Gp.toString=function(){return"[object Generator]"},runtime.keys=function(object){var keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},runtime.values=values,Context.prototype={constructor:Context,reset:function(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=undefined)},stop:function(){this.done=!0;var rootEntry=this.tryEntries[0],rootRecord=rootEntry.completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function(exception){function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=undefined),!!caught}if(this.done)throw exception;for(var context=this,i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName:resultName,nextLoc:nextLoc},"next"===this.method&&(this.arg=undefined),ContinueSentinel}}}(function(){return this}()||Function("return this")())},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _promise=__webpack_require__(22),_promise2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_promise);exports.default=function(fn){return function(){var gen=fn.apply(this,arguments);return new _promise2.default(function(resolve,reject){function step(key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}if(!info.done)return _promise2.default.resolve(value).then(function(value){step("next",value)},function(err){step("throw",err)});resolve(value)}return step("next")})}}},function(module,exports,__webpack_require__){__webpack_require__(49),__webpack_require__(50),__webpack_require__(62),__webpack_require__(66),__webpack_require__(77),__webpack_require__(78),module.exports=__webpack_require__(2).Promise},function(module,exports){},function(module,exports,__webpack_require__){"use strict";var $at=__webpack_require__(51)(!0);__webpack_require__(23)(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(14),defined=__webpack_require__(15);module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536)}}},function(module,exports,__webpack_require__){module.exports=!__webpack_require__(6)&&!__webpack_require__(16)(function(){return 7!=Object.defineProperty(__webpack_require__(17)("div"),"a",{get:function(){return 7}}).a})},function(module,exports,__webpack_require__){var isObject=__webpack_require__(8);module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)},function(module,exports,__webpack_require__){"use strict";var create=__webpack_require__(56),descriptor=__webpack_require__(25),setToStringTag=__webpack_require__(20),IteratorPrototype={};__webpack_require__(5)(IteratorPrototype,__webpack_require__(1)("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},function(module,exports,__webpack_require__){var anObject=__webpack_require__(3),dPs=__webpack_require__(57),enumBugKeys=__webpack_require__(31),IE_PROTO=__webpack_require__(19)("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=__webpack_require__(17)("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",__webpack_require__(32).appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict.prototype[enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},function(module,exports,__webpack_require__){var dP=__webpack_require__(7),anObject=__webpack_require__(3),getKeys=__webpack_require__(26);module.exports=__webpack_require__(6)?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},function(module,exports,__webpack_require__){var has=__webpack_require__(12),toIObject=__webpack_require__(18),arrayIndexOf=__webpack_require__(59)(!1),IE_PROTO=__webpack_require__(19)("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},function(module,exports,__webpack_require__){var toIObject=__webpack_require__(18),toLength=__webpack_require__(28),toAbsoluteIndex=__webpack_require__(60);module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},function(module,exports,__webpack_require__){var toInteger=__webpack_require__(14),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},function(module,exports,__webpack_require__){var has=__webpack_require__(12),toObject=__webpack_require__(33),IE_PROTO=__webpack_require__(19)("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},function(module,exports,__webpack_require__){__webpack_require__(63);for(var global=__webpack_require__(0),hide=__webpack_require__(5),Iterators=__webpack_require__(9),TO_STRING_TAG=__webpack_require__(1)("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},function(module,exports,__webpack_require__){"use strict";var addToUnscopables=__webpack_require__(64),step=__webpack_require__(65),Iterators=__webpack_require__(9),toIObject=__webpack_require__(18);module.exports=__webpack_require__(23)(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},function(module,exports){module.exports=function(){}},function(module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},function(module,exports,__webpack_require__){"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=__webpack_require__(24),global=__webpack_require__(0),ctx=__webpack_require__(10),classof=__webpack_require__(34),$export=__webpack_require__(4),isObject=__webpack_require__(8),aFunction=__webpack_require__(11),anInstance=__webpack_require__(67),forOf=__webpack_require__(68),speciesConstructor=__webpack_require__(35),task=__webpack_require__(36).set,microtask=__webpack_require__(73)(),newPromiseCapabilityModule=__webpack_require__(21),perform=__webpack_require__(37),promiseResolve=__webpack_require__(38),TypeError=global.TypeError,process=global.process,$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[__webpack_require__(1)("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise}catch(e){}}(),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0;chain.length>i;)!function(reaction){var result,then,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&domain.exit()),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){reject(e)}}(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,unhandled&&result.e)throw result.v})},isUnhandled=function(promise){return 1!==promise._h&&0===(promise._a||promise._c).length},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=__webpack_require__(74)($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),__webpack_require__(20)($Promise,"Promise"),__webpack_require__(75)("Promise"),Wrapper=__webpack_require__(2).Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&__webpack_require__(76)(function(iter){$Promise.all(iter).catch(empty)})),"Promise",{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},function(module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},function(module,exports,__webpack_require__){var ctx=__webpack_require__(10),call=__webpack_require__(69),isArrayIter=__webpack_require__(70),anObject=__webpack_require__(3),toLength=__webpack_require__(28),getIterFn=__webpack_require__(71),BREAK={},RETURN={},exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result};exports.BREAK=BREAK,exports.RETURN=RETURN},function(module,exports,__webpack_require__){var anObject=__webpack_require__(3);module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},function(module,exports,__webpack_require__){var Iterators=__webpack_require__(9),ITERATOR=__webpack_require__(1)("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},function(module,exports,__webpack_require__){var classof=__webpack_require__(34),ITERATOR=__webpack_require__(1)("iterator"),Iterators=__webpack_require__(9);module.exports=__webpack_require__(2).getIteratorMethod=function(it){if(void 0!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},function(module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},function(module,exports,__webpack_require__){var global=__webpack_require__(0),macrotask=__webpack_require__(36).set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==__webpack_require__(13)(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var promise=Promise.resolve();notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};else{var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},function(module,exports,__webpack_require__){var hide=__webpack_require__(5);module.exports=function(target,src,safe){for(var key in src)safe&&target[key]?target[key]=src[key]:hide(target,key,src[key]);return target}},function(module,exports,__webpack_require__){"use strict";var global=__webpack_require__(0),core=__webpack_require__(2),dP=__webpack_require__(7),DESCRIPTORS=__webpack_require__(6),SPECIES=__webpack_require__(1)("species");module.exports=function(KEY){var C="function"==typeof core[KEY]?core[KEY]:global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},function(module,exports,__webpack_require__){var ITERATOR=__webpack_require__(1)("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(4),core=__webpack_require__(2),global=__webpack_require__(0),speciesConstructor=__webpack_require__(35),promiseResolve=__webpack_require__(38);$export($export.P+$export.R,"Promise",{finally:function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise),isFunction="function"==typeof onFinally;return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},function(module,exports,__webpack_require__){"use strict";var $export=__webpack_require__(4),newPromiseCapability=__webpack_require__(21),perform=__webpack_require__(37);$export($export.S,"Promise",{try:function(callbackfn){var promiseCapability=newPromiseCapability.f(this),result=perform(callbackfn);return(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v),promiseCapability.promise}})},function(module,exports,__webpack_require__){__webpack_require__(80),module.exports=__webpack_require__(2).Object.assign},function(module,exports,__webpack_require__){var $export=__webpack_require__(4);$export($export.S+$export.F,"Object",{assign:__webpack_require__(81)})},function(module,exports,__webpack_require__){"use strict";var getKeys=__webpack_require__(26),gOPS=__webpack_require__(82),pIE=__webpack_require__(83),toObject=__webpack_require__(33),IObject=__webpack_require__(27),$assign=Object.assign;module.exports=!$assign||__webpack_require__(16)(function(){var A={},B={},S=Symbol(),K="abcdefghijklmnopqrst";return A[S]=7,K.split("").forEach(function(k){B[k]=k}),7!=$assign({},A)[S]||Object.keys($assign({},B)).join("")!=K})?function(target,source){for(var T=toObject(target),aLen=arguments.length,index=1,getSymbols=gOPS.f,isEnum=pIE.f;aLen>index;)for(var key,S=IObject(arguments[index++]),keys=getSymbols?getKeys(S).concat(getSymbols(S)):getKeys(S),length=keys.length,j=0;length>j;)isEnum.call(S,key=keys[j++])&&(T[key]=S[key]);return T}:$assign},function(module,exports){exports.f=Object.getOwnPropertySymbols},function(module,exports){exports.f={}.propertyIsEnumerable},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _assign=__webpack_require__(39),_assign2=_interopRequireDefault(_assign),_classCallCheck2=__webpack_require__(40),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(85),_createClass3=_interopRequireDefault(_createClass2),ceil=Math.ceil,abs=Math.abs,sqrt=Math.sqrt,pow=Math.pow,Particle=function(){function Particle(options){(0,_classCallCheck3.default)(this,Particle),this.set(options),this.x=this.ox,this.y=this.oy,this.tx=this.ox,this.ty=this.oy}return(0,_createClass3.default)(Particle,[{key:"set",value:function(options){for(var key in options)options.hasOwnProperty(key)&&(this[key]=options[key])}}]),Particle}();exports.default=Particle,(0,_assign2.default)(Particle.prototype,{ox:0,oy:0,x:0,y:0,tx:0,ty:0,row:0,col:0,frameX:0,frameY:0,frameR:0,frameG:0,frameB:0,frameA:0,frameNum:1,shape:"square",oBg:{r:0,g:0,b:0,a:0},bg:{r:0,g:0,b:0,a:0},tBg:{r:0,g:0,b:0,a:0},size:1,layer:0,velocity:1,reCalc:function(){var framePosition=ceil(sqrt(pow(this.tx-this.x,2)+pow(this.ty-this.y,2))/this.velocity)||1,frameBgR=ceil((this.tBg.r-this.bg.r)/this.velocity)||1,frameBgG=ceil((this.tBg.g-this.bg.g)/this.velocity)||1,frameBgB=ceil((this.tBg.b-this.bg.b)/this.velocity)||1,frameBgA=ceil((this.tBg.a-this.bg.a)/this.velocity)||1;this.frameNum=Math.max(60,framePosition,frameBgR,frameBgG,frameBgB,frameBgA),this.frameX=(this.tx-this.x)/this.frameNum||0,this.frameY=(this.ty-this.y)/this.frameNum||0,this.frameR=(this.tBg.r-this.bg.r)/this.frameNum||0,this.frameG=(this.tBg.g-this.bg.g)/this.frameNum||0,this.frameB=(this.tBg.b-this.bg.b)/this.frameNum||0,this.frameA=(this.tBg.a-this.bg.a)/this.frameNum||0},shouldUpdate:function(){return this.bg.a&&(this.x!==this.tx||this.y!==this.ty||this.bg.r!==this.tBg.r||this.bg.g!==this.tBg.g||this.bg.b!==this.tBg.b||this.bg.a!==this.tBg.a)},update:function(){var xUpdate=this.x!==this.tx,yUpdate=this.y!==this.ty,rUpdate=this.bg.r!==this.tBg.r,gUpdate=this.bg.g!==this.tBg.g,bUpdate=this.bg.b!==this.tBg.b,aUpdate=this.bg.a!==this.tBg.a;if(xUpdate){if(abs(this.tx-this.x)<abs(this.frameX))return void(this.x=this.tx);this.x+=this.frameX}if(yUpdate){if(abs(this.ty-this.y)<abs(this.frameY))return void(this.y=this.ty);this.y+=this.frameY}if(rUpdate){if(abs(this.tBg.r-this.bg.r)<abs(this.frameR))return void(this.bg.r=this.tBg.r);this.bg.r+=this.frameR}if(gUpdate){if(abs(this.tBg.g-this.bg.g)<abs(this.frameG))return void(this.bg.g=this.tBg.g);this.bg.g+=this.frameG}if(bUpdate){if(abs(this.tBg.b-this.bg.b)<abs(this.frameB))return void(this.bg.b=this.tBg.b);this.bg.b+=this.frameB}if(aUpdate){if(abs(this.tBg.a-this.bg.a)<abs(this.frameA))return void(this.bg.a=this.tBg.a);this.bg.a+=this.frameA}},render:function(_ref){var ctx=_ref.ctx;ctx instanceof CanvasRenderingContext2D&&this.bg.a&&(this.bg.a&&(ctx.globalAlpha=this.bg.a/255),ctx.fillStyle="rgb("+~~this.bg.r+","+~~this.bg.g+","+~~this.bg.b+")",this.renderShape(ctx))},renderShape:function(ctx){"square"===this.shape?ctx.fillRect(~~(this.x-this.size/2),~~(this.y-this.size/2),this.size,this.size):"round"===this.shape&&(ctx.beginPath(),ctx.arc(~~this.x,~~this.y,this.size>>1||1,0,2*Math.PI,!0),ctx.closePath(),ctx.fill())}})},function(module,exports,__webpack_require__){"use strict";exports.__esModule=!0;var _defineProperty=__webpack_require__(86),_defineProperty2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_defineProperty);exports.default=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),(0,_defineProperty2.default)(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}()},function(module,exports,__webpack_require__){module.exports={default:__webpack_require__(87),__esModule:!0}},function(module,exports,__webpack_require__){__webpack_require__(88);var $Object=__webpack_require__(2).Object;module.exports=function(it,key,desc){return $Object.defineProperty(it,key,desc)}},function(module,exports,__webpack_require__){var $export=__webpack_require__(4);$export($export.S+$export.F*!__webpack_require__(6),"Object",{defineProperty:__webpack_require__(7).f})},function(module,exports,__webpack_require__){"use strict";function avg(arr){return arr&&arr.length?arr.reduce(function(a,b){return a+b})/arr.length:0}function calcRgbaData(){for(var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},imageData=data.imageData,width=data.width,res=[],i=0;i<imageData.length;i+=4)i/4%width==0&&res.push([]),res[res.length-1].push([imageData[i],imageData[i+1],imageData[i+2],imageData[i+3]]);return res}function calcPixelData(data,rgbaData){for(var res=[],size=data.size,colNum=Math.ceil(data.width/size),rowNum=Math.ceil(data.height/size),i=0;i<rowNum;i++){res.push([]);for(var j=0;j<colNum;j++){for(var startCol=size*i,startRow=size*j,squareData=[],m=startCol;m<startCol+size;m++)for(var n=startRow;n<startRow+size;n++)rgbaData[m]&&rgbaData[m][n]?squareData.push(rgbaData[m][n]):squareData.push([0,0,0,0]);squareData=squareData.filter(function(d){return d[3]});var avgR=avg(squareData.map(function(d){return d[0]})),avgG=avg(squareData.map(function(d){return d[1]})),avgB=avg(squareData.map(function(d){return d[2]})),avgA=avg(squareData.map(function(d){return d[3]}));res[i].push({r:Math.round(avgR),g:Math.round(avgG),b:Math.round(avgB),a:Math.round(avgA)})}}return res}module.exports=function(data){return calcPixelData(data,calcRgbaData(data))}}])});
//# sourceMappingURL=pixelSwiper.js.map